<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-07-07 Sat 20:54 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>jojo</title>
<meta name="generator" content="Org-mode" />
<link rel="stylesheet" href="css/org-page.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">jojo</h1>
<div id="table-of-contents">
<h2>overview</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgac0e235"><span class="done _todo_stack_">[todo-stack]</span> </a>
<ul>
<li><a href="#orgcde7449">model type as obj</a></li>
<li><a href="#orge26f5d8">sexp-t &#x2013; we need a parser, to do farther tests</a></li>
<li><a href="#org4a56665">indirected threaded code</a></li>
<li><a href="#org20413f2">overload `==` and `=` [and more] &#x2013; for gc</a></li>
<li><a href="#org61c56fd">inherit obj_t as ffi &#x2013; we need examples</a></li>
</ul>
</li>
<li><a href="#orge6d5e93">prolog</a>
<ul>
<li><a href="#org2c348f0">include</a></li>
<li><a href="#org689f9af">using</a></li>
</ul>
</li>
<li><a href="#org8d84a5f">datatype</a>
<ul>
<li><a href="#org4185a89">forward declaration</a></li>
<li><a href="#org6afa69c">name_t</a></li>
<li><a href="#org7397432">local_map_t</a></li>
<li><a href="#org5032830">jojo_t</a></li>
<li><a href="#org3a02e65">jo_t</a></li>
<li><a href="#org3cb1e53">tag_t</a></li>
<li><a href="#orgef6177b">obj_t</a></li>
<li><a href="#orgd6b7bee">frame_t</a></li>
<li><a href="#org84dc22a">name_map_t</a></li>
<li><a href="#orgde47452">obj_stack_t</a></li>
<li><a href="#org499b701">frame_stack_t</a></li>
<li><a href="#org209f08d">gc</a>
<ul>
<li><a href="#orgaedbd6">cell_state_t</a></li>
<li><a href="#org5ed97fa">cell_t</a></li>
<li><a href="#org4d3db">cell_area_t</a></li>
<li><a href="#orgbb8fb04">gc_t</a></li>
</ul>
</li>
<li><a href="#org281fd6f">env_t</a></li>
</ul>
</li>
<li><a href="#org924cc89">obj</a>
<ul>
<li><a href="#orga1903e4">forward declaration</a></li>
<li><a href="#org177f9a1">obj</a>
<ul>
<li><a href="#org88a5189">obj_t::~obj_t</a></li>
<li><a href="#org53d215a">obj_t::mark</a></li>
<li><a href="#org2306967">obj_t::print</a></li>
<li><a href="#org8ff9931">obj_t::apply</a></li>
</ul>
</li>
<li><a href="#org8c3eba7">lambda</a>
<ul>
<li><a href="#org8a7072e">lambda_o</a></li>
<li><a href="#orgeff1ef5">lambda_o::lambda_o</a></li>
<li><a href="#orgf913470">lambda_o::~lambda_o</a></li>
<li><a href="#org7f60d00">lambda_o::mark</a></li>
<li><a href="#orga5d5f39">lambda_o::apply</a></li>
</ul>
</li>
<li><a href="#orgb43876f">primitive</a>
<ul>
<li><a href="#org772f15c">prim_fn</a></li>
<li><a href="#org9330af9">primitive_o</a></li>
<li><a href="#orgfa77245">primitive_o::primitive_o</a></li>
<li><a href="#orgb449628">primitive_o::apply</a></li>
</ul>
</li>
<li><a href="#org9e4b2d8">int</a>
<ul>
<li><a href="#orgdf54ce8">int_o</a></li>
<li><a href="#orgd971b6a">int_o::int_o</a></li>
</ul>
</li>
<li><a href="#org4b230ec">string</a>
<ul>
<li><a href="#org4eaf3c7">string_o</a></li>
<li><a href="#org2b72be6">string_o::string_o</a></li>
</ul>
</li>
<li><a href="#org820934">bool</a>
<ul>
<li><a href="#orge749a7b">bool_o</a></li>
<li><a href="#org54125b2">bool_o::bool_o</a></li>
</ul>
</li>
<li><a href="#orga3c60c1">map</a>
<ul>
<li><a href="#org7c6a9c">map_t</a></li>
<li><a href="#org3910247">map_o</a></li>
<li><a href="#org30e8a22">map_o::map_o</a></li>
<li><a href="#orgc117046">map_o::~map_o</a></li>
<li><a href="#orga1f5351">map_o::mark</a></li>
</ul>
</li>
<li><a href="#org5f8aa6">data</a>
<ul>
<li><a href="#org61e0314">field_map_t</a></li>
<li><a href="#org7792a1d">data_o</a></li>
<li><a href="#org2922311">data_o::data_o</a></li>
<li><a href="#org393cd5a">data_o::~data_o</a></li>
<li><a href="#org5bf89de">data_o::mark</a></li>
</ul>
</li>
<li><a href="#orgd183c60">type</a>
<ul>
<li><a href="#orgda28641"><span class="todo _note_">[note]</span> type-constructor</a></li>
<li><a href="#org31d0c12">field_vector_t</a></li>
<li><a href="#org14760bc">type_o</a></li>
<li><a href="#orgd22b5be">type_o::type_o</a></li>
<li><a href="#org84e573b">type_o::~type_o</a></li>
</ul>
</li>
<li><a href="#org2367e08">data_constructor</a>
<ul>
<li><a href="#orgb11ad4f">data_constructor_o</a></li>
<li><a href="#org7c437ef">data_constructor_o::data_constructor_o</a></li>
<li><a href="#orge1d365f">data_constructor_o::apply</a></li>
</ul>
</li>
<li><a href="#org3c6061">data_creator</a>
<ul>
<li><a href="#orga52d704">data_creator_o</a></li>
<li><a href="#org4b01af2">data_creator_o::data_creator_o</a></li>
<li><a href="#orga215c8a">data_creator_o::apply</a></li>
</ul>
</li>
<li><a href="#orgffab07f">data_predicate</a>
<ul>
<li><a href="#org5266bd9">data_predicate_o</a></li>
<li><a href="#orgca072a1">data_predicate_o::data_predicate_o</a></li>
<li><a href="#org675bb13">data_predicate_o::apply</a></li>
</ul>
</li>
<li><a href="#org61cd0b6">sexp</a></li>
</ul>
</li>
<li><a href="#org5748df">env</a>
<ul>
<li><a href="#org36fc415">jojo</a>
<ul>
<li><a href="#org5fbb538">jojo_print</a></li>
<li><a href="#org58ea962">jojo_print_with_index</a></li>
</ul>
</li>
<li><a href="#org3ed6fc1">frame</a>
<ul>
<li><a href="#org1c7be4d">frame_t::frame_t</a></li>
<li><a href="#orgf73d791">frame_report</a></li>
</ul>
</li>
<li><a href="#org8045b99">name_map</a>
<ul>
<li><a href="#org1e15820">name_map_report</a></li>
</ul>
</li>
<li><a href="#orgdd96e2a">obj_stack</a>
<ul>
<li><a href="#org4697715">frame_stack_report</a></li>
</ul>
</li>
<li><a href="#org37419bc">frame_stack</a>
<ul>
<li><a href="#org8e6b376">obj_stack_report</a></li>
</ul>
</li>
<li><a href="#orgd9f3773">gc</a>
<ul>
<li><a href="#org482d777">gc_t::gc_t</a></li>
<li><a href="#org41a8299">gc_prepare</a></li>
<li><a href="#org6c69b7b">gc_mark_one</a></li>
<li><a href="#org863d92a">gc_mark</a></li>
<li><a href="#orgfef3519">gc_sweep</a></li>
<li><a href="#org7c1c450">gc_run</a></li>
<li><a href="#org889a401">gc_next_free_cell</a></li>
<li><a href="#org928db5a">gc_for</a></li>
</ul>
</li>
<li><a href="#org86f3a7c">env_t::env_t</a></li>
<li><a href="#orgb01a926">env_t::step</a></li>
<li><a href="#org53c368f">env_t::run</a></li>
<li><a href="#org8394133">env_t::report</a></li>
</ul>
</li>
<li><a href="#orgb39cf46">jo</a>
<ul>
<li><a href="#org749ad19">jo</a>
<ul>
<li><a href="#org55e9022">jo_t::exe</a></li>
<li><a href="#org39a99cd">jo_t::repr</a></li>
</ul>
</li>
<li><a href="#orgbeca43f">call_jo</a>
<ul>
<li><a href="#orgc779689">call_jo_t</a></li>
<li><a href="#orgcbdd2f7">call_jo_t::call_jo_t</a></li>
<li><a href="#orgf0b1611">call_jo_t::exe</a></li>
<li><a href="#org79ed28e">call_jo_t::repr</a></li>
</ul>
</li>
<li><a href="#orgba50f48">let_jo</a>
<ul>
<li><a href="#orgcc8239d">let_jo_t</a></li>
<li><a href="#org6bdd819">let_jo_t::let_jo_t</a></li>
<li><a href="#orgb8bb289">let_jo_t::exe</a></li>
<li><a href="#org3812a2e">let_jo_t::repr</a></li>
</ul>
</li>
<li><a href="#org73b1641">lambda_jo</a>
<ul>
<li><a href="#org3eef1d0">lambda_jo_t</a></li>
<li><a href="#org561e119">lambda_jo_t::lambda_jo_t</a></li>
<li><a href="#org5ca7e59">lambda_jo_t::exe</a></li>
<li><a href="#org7a32d49">lambda_jo_t::repr</a></li>
</ul>
</li>
<li><a href="#org601c1e2">field_jo</a>
<ul>
<li><a href="#org6516ddf">field_jo_t</a></li>
<li><a href="#orgffca87e">field_jo_t::field_jo_t</a></li>
<li><a href="#org3bf7654">field_jo_t::exe</a></li>
<li><a href="#org8ed9407">field_jo_t::repr</a></li>
</ul>
</li>
<li><a href="#org31f62d4">apply_jo</a>
<ul>
<li><a href="#orga2ce963">apply_jo_t</a></li>
<li><a href="#org7573f72">apply_jo_t::exe</a></li>
<li><a href="#org90e1048">apply_jo_t::repr</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgbb6855f">epilog</a>
<ul>
<li><a href="#org33c573e"><span class="todo _gt__lt_">&gt;&lt;</span> test</a></li>
<li><a href="#org40b0395">play</a>
<ul>
<li><a href="#org1d7d62d">p1</a></li>
<li><a href="#org3a637e9">p2</a></li>
</ul>
</li>
<li><a href="#org5a5f3b8">main</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgac0e235" class="outline-2">
<h2 id="orgac0e235"><span class="done _todo_stack_">[todo-stack]</span> </h2>
<div class="outline-text-2" id="text-orgac0e235">
</div><div id="outline-container-orgcde7449" class="outline-3">
<h3 id="orgcde7449">model type as obj</h3>
</div>

<div id="outline-container-orge26f5d8" class="outline-3">
<h3 id="orge26f5d8">sexp-t &#x2013; we need a parser, to do farther tests</h3>
</div>

<div id="outline-container-org4a56665" class="outline-3">
<h3 id="org4a56665">indirected threaded code</h3>
<div class="outline-text-3" id="text-org4a56665">
<ul class="org-ul">
<li><p>name map is only used in definition</p></li></ul>
</div>
</div>

<div id="outline-container-org20413f2" class="outline-3">
<h3 id="org20413f2">overload `==` and `=` [and more] &#x2013; for gc</h3>
</div>

<div id="outline-container-org61c56fd" class="outline-3">
<h3 id="org61c56fd">inherit obj_t as ffi &#x2013; we need examples</h3>
</div>
</div>

<div id="outline-container-orge6d5e93" class="outline-2">
<h2 id="orge6d5e93">prolog</h2>
<div class="outline-text-2" id="text-orge6d5e93">
</div><div id="outline-container-org2c348f0" class="outline-3">
<h3 id="org2c348f0">include</h3>
<div class="outline-text-3" id="text-org2c348f0">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;iostream&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;vector&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;array&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;map&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;set&gt;</span>
<span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;stack&gt;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org689f9af" class="outline-3">
<h3 id="org689f9af">using</h3>
<div class="outline-text-3" id="text-org689f9af">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #F0DFAF; font-weight: bold;">namespace</span> <span style="color: #BFEBBF;">std</span>;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8d84a5f" class="outline-2">
<h2 id="org8d84a5f">datatype</h2>
<div class="outline-text-2" id="text-org8d84a5f">
</div><div id="outline-container-org4185a89" class="outline-3">
<h3 id="org4185a89">forward declaration</h3>
<div class="outline-text-3" id="text-org4185a89">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">env_t</span>;
<span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">obj_t</span>;
<span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">cell_t</span>;
<span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">jo_t</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org6afa69c" class="outline-3">
<h3 id="org6afa69c">name_t</h3>
<div class="outline-text-3" id="text-org6afa69c">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">name_t</span> = string;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7397432" class="outline-3">
<h3 id="org7397432">local_map_t</h3>
<div class="outline-text-3" id="text-org7397432">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">local_map_t</span> = <span style="color: #7CB8BB;">map</span>&lt;<span style="color: #7CB8BB;">name_t</span>, <span style="color: #7CB8BB;">obj_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org5032830" class="outline-3">
<h3 id="org5032830">jojo_t</h3>
<div class="outline-text-3" id="text-org5032830">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">jojo_t</span> = <span style="color: #7CB8BB;">vector</span>&lt;<span style="color: #7CB8BB;">jo_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a02e65" class="outline-3">
<h3 id="org3a02e65">jo_t</h3>
<div class="outline-text-3" id="text-org3a02e65">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org3cb1e53" class="outline-3">
<h3 id="org3cb1e53">tag_t</h3>
<div class="outline-text-3" id="text-org3cb1e53">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">tag_t</span> = string;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef6177b" class="outline-3">
<h3 id="orgef6177b">obj_t</h3>
<div class="outline-text-3" id="text-orgef6177b">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">t</span>;
    <span style="color: #7CB8BB;">cell_t</span> *<span style="color: #DFAF8F;">cell</span>;
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> ~<span style="color: #93E0E3;">obj_t</span> ();
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">print</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6b7bee" class="outline-3">
<h3 id="orgd6b7bee">frame_t</h3>
<div class="outline-text-3" id="text-orgd6b7bee">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">frame_t</span>
{
    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">index</span>;
    <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>;
    <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>;
    <span style="color: #93E0E3;">frame_t</span> (<span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org84dc22a" class="outline-3">
<h3 id="org84dc22a">name_map_t</h3>
<div class="outline-text-3" id="text-org84dc22a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">name_map_t</span> = <span style="color: #7CB8BB;">map</span>&lt;<span style="color: #7CB8BB;">name_t</span>, <span style="color: #7CB8BB;">obj_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgde47452" class="outline-3">
<h3 id="orgde47452">obj_stack_t</h3>
<div class="outline-text-3" id="text-orgde47452">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">obj_stack_t</span> = <span style="color: #7CB8BB;">stack</span>&lt;<span style="color: #7CB8BB;">obj_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org499b701" class="outline-3">
<h3 id="org499b701">frame_stack_t</h3>
<div class="outline-text-3" id="text-org499b701">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">frame_stack_t</span> = <span style="color: #7CB8BB;">stack</span>&lt;<span style="color: #7CB8BB;">frame_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org209f08d" class="outline-3">
<h3 id="org209f08d">gc</h3>
<div class="outline-text-3" id="text-org209f08d">
</div><div id="outline-container-orgaedbd6" class="outline-4">
<h4 id="orgaedbd6">cell_state_t</h4>
<div class="outline-text-4" id="text-orgaedbd6">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">enum</span> <span style="color: #7CB8BB;">cell_state_t</span>
    { <span style="color: #DFAF8F;">CELL_STATE_USED</span>,
      <span style="color: #DFAF8F;">CELL_STATE_FREE</span> };
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ed97fa" class="outline-4">
<h4 id="org5ed97fa">cell_t</h4>
<div class="outline-text-4" id="text-org5ed97fa">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">cell_t</span>
{
    <span style="color: #7CB8BB;">cell_state_t</span> <span style="color: #DFAF8F;">state</span>;
    <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span>;
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d3db" class="outline-4">
<h4 id="org4d3db">cell_area_t</h4>
<div class="outline-text-4" id="text-org4d3db">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">const</span> <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">cell_area_size</span> = 1024;
<span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">cell_area_t</span> = <span style="color: #7CB8BB;">array</span>&lt;<span style="color: #7CB8BB;">cell_t</span>, cell_area_size&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbb8fb04" class="outline-4">
<h4 id="orgbb8fb04">gc_t</h4>
<div class="outline-text-4" id="text-orgbb8fb04">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">gc_t</span>
{
    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">index</span>;
    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">mark_counter</span>;
    <span style="color: #7CB8BB;">cell_area_t</span> *<span style="color: #DFAF8F;">cell_area</span>;
    <span style="color: #93E0E3;">gc_t</span> ();
};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org281fd6f" class="outline-3">
<h3 id="org281fd6f">env_t</h3>
<div class="outline-text-3" id="text-org281fd6f">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">env_t</span>
{
    <span style="color: #7CB8BB;">name_map_t</span> *<span style="color: #DFAF8F;">name_map</span>;
    <span style="color: #7CB8BB;">obj_stack_t</span> *<span style="color: #DFAF8F;">obj_stack</span>;
    <span style="color: #7CB8BB;">frame_stack_t</span> *<span style="color: #DFAF8F;">frame_stack</span>;
    <span style="color: #7CB8BB;">gc_t</span> *<span style="color: #DFAF8F;">gc</span>;
    <span style="color: #93E0E3;">env_t</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">step</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">run</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">report</span> ();
};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org924cc89" class="outline-2">
<h2 id="org924cc89">obj</h2>
<div class="outline-text-2" id="text-org924cc89">
</div><div id="outline-container-orga1903e4" class="outline-3">
<h3 id="orga1903e4">forward declaration</h3>
<div class="outline-text-3" id="text-orga1903e4">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_for</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-org177f9a1" class="outline-3">
<h3 id="org177f9a1">obj</h3>
<div class="outline-text-3" id="text-org177f9a1">
</div><div id="outline-container-org88a5189" class="outline-4">
<h4 id="org88a5189">obj_t::~obj_t</h4>
<div class="outline-text-4" id="text-org88a5189">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">obj_t</span>::~<span style="color: #93E0E3;">obj_t</span> ()
{
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org53d215a" class="outline-4">
<h4 id="org53d215a">obj_t::mark</h4>
<div class="outline-text-4" id="text-org53d215a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">obj_t</span>::<span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell-&gt;state = CELL_STATE_USED;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2306967" class="outline-4">
<h4 id="org2306967">obj_t::print</h4>
<div class="outline-text-4" id="text-org2306967">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">obj_t</span>::<span style="color: #93E0E3;">print</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    cout &lt;&lt; <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ff9931" class="outline-4">
<h4 id="org8ff9931">obj_t::apply</h4>
<div class="outline-text-4" id="text-org8ff9931">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">obj_t</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    env-&gt;obj_stack-&gt;push (<span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8c3eba7" class="outline-3">
<h3 id="org8c3eba7">lambda</h3>
<div class="outline-text-3" id="text-org8c3eba7">
</div><div id="outline-container-org8a7072e" class="outline-4">
<h4 id="org8a7072e">lambda_o</h4>
<div class="outline-text-4" id="text-org8a7072e">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">lambda_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>;
    <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>;
    <span style="color: #93E0E3;">lambda_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">jojo_t</span>* <span style="color: #DFAF8F;">jojo</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> ~<span style="color: #93E0E3;">lambda_o</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeff1ef5" class="outline-4">
<h4 id="orgeff1ef5">lambda_o::lambda_o</h4>
<div class="outline-text-4" id="text-orgeff1ef5">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">lambda_o</span>::<span style="color: #93E0E3;">lambda_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>,
                            <span style="color: #7CB8BB;">jojo_t</span>* <span style="color: #DFAF8F;">jojo</span>,
                            <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"lambda-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo = jojo;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map = local_map;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf913470" class="outline-4">
<h4 id="orgf913470">lambda_o::~lambda_o</h4>
<div class="outline-text-4" id="text-orgf913470">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">lambda_o</span>::~<span style="color: #93E0E3;">lambda_o</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">delete</span> <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map-&gt;clear ();
    <span style="color: #F0DFAF; font-weight: bold;">delete</span> <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f60d00" class="outline-4">
<h4 id="org7f60d00">lambda_o::mark</h4>
<div class="outline-text-4" id="text-org7f60d00">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">lambda_o</span>::<span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell-&gt;state = CELL_STATE_USED;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map)) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        obj-&gt;mark (env);
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5d5f39" class="outline-4">
<h4 id="orga5d5f39">lambda_o::apply</h4>
<div class="outline-text-4" id="text-orga5d5f39">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">lambda_o</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">frame_t</span> (<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo, <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map);
    env-&gt;frame_stack-&gt;push (frame);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb43876f" class="outline-3">
<h3 id="orgb43876f">primitive</h3>
<div class="outline-text-3" id="text-orgb43876f">
</div><div id="outline-container-org772f15c" class="outline-4">
<h4 id="org772f15c">prim_fn</h4>
<div class="outline-text-4" id="text-org772f15c">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">typedef</span> <span style="color: #7CB8BB;">void</span> (*<span style="color: #7CB8BB;">prim_fn</span>) (<span style="color: #7CB8BB;">env_t</span> *);
</pre>
</div>
</div>
</div>

<div id="outline-container-org9330af9" class="outline-4">
<h4 id="org9330af9">primitive_o</h4>
<div class="outline-text-4" id="text-org9330af9">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">primitive_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">prim_fn</span> <span style="color: #DFAF8F;">fn</span>;
    <span style="color: #93E0E3;">primitive_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">prim_fn</span> <span style="color: #DFAF8F;">fn</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa77245" class="outline-4">
<h4 id="orgfa77245">primitive_o::primitive_o</h4>
<div class="outline-text-4" id="text-orgfa77245">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">primitive_o</span>::<span style="color: #93E0E3;">primitive_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">prim_fn</span> <span style="color: #DFAF8F;">fn</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"primitive-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;fn = fn;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb449628" class="outline-4">
<h4 id="orgb449628">primitive_o::apply</h4>
<div class="outline-text-4" id="text-orgb449628">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">primitive_o</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;fn (env);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9e4b2d8" class="outline-3">
<h3 id="org9e4b2d8">int</h3>
<div class="outline-text-3" id="text-org9e4b2d8">
</div><div id="outline-container-orgdf54ce8" class="outline-4">
<h4 id="orgdf54ce8">int_o</h4>
<div class="outline-text-4" id="text-orgdf54ce8">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">int_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">int</span> <span style="color: #DFAF8F;">i</span>;
    <span style="color: #93E0E3;">int_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">int</span> <span style="color: #DFAF8F;">i</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd971b6a" class="outline-4">
<h4 id="orgd971b6a">int_o::int_o</h4>
<div class="outline-text-4" id="text-orgd971b6a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">int_o</span>::<span style="color: #93E0E3;">int_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">int</span> <span style="color: #DFAF8F;">i</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"int-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;i = i;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4b230ec" class="outline-3">
<h3 id="org4b230ec">string</h3>
<div class="outline-text-3" id="text-org4b230ec">
</div><div id="outline-container-org4eaf3c7" class="outline-4">
<h4 id="org4eaf3c7">string_o</h4>
<div class="outline-text-4" id="text-org4eaf3c7">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">string_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">string</span> <span style="color: #DFAF8F;">s</span>;
    <span style="color: #93E0E3;">string_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">string</span> <span style="color: #DFAF8F;">s</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b72be6" class="outline-4">
<h4 id="org2b72be6">string_o::string_o</h4>
<div class="outline-text-4" id="text-org2b72be6">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">string_o</span>::<span style="color: #93E0E3;">string_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">string</span> <span style="color: #DFAF8F;">s</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"string-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;s = s;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org820934" class="outline-3">
<h3 id="org820934">bool</h3>
<div class="outline-text-3" id="text-org820934">
</div><div id="outline-container-orge749a7b" class="outline-4">
<h4 id="orge749a7b">bool_o</h4>
<div class="outline-text-4" id="text-orge749a7b">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">bool_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">bool</span> <span style="color: #DFAF8F;">b</span>;
    <span style="color: #93E0E3;">bool_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">bool</span> <span style="color: #DFAF8F;">b</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org54125b2" class="outline-4">
<h4 id="org54125b2">bool_o::bool_o</h4>
<div class="outline-text-4" id="text-org54125b2">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">bool_o</span>::<span style="color: #93E0E3;">bool_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">bool</span> <span style="color: #DFAF8F;">b</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"bool-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;b = b;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga3c60c1" class="outline-3">
<h3 id="orga3c60c1">map</h3>
<div class="outline-text-3" id="text-orga3c60c1">
</div><div id="outline-container-org7c6a9c" class="outline-4">
<h4 id="org7c6a9c">map_t</h4>
<div class="outline-text-4" id="text-org7c6a9c">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">map_t</span> = <span style="color: #7CB8BB;">map</span>&lt;<span style="color: #7CB8BB;">string</span>, <span style="color: #7CB8BB;">obj_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3910247" class="outline-4">
<h4 id="org3910247">map_o</h4>
<div class="outline-text-4" id="text-org3910247">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">map_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">map_t</span> *<span style="color: #DFAF8F;">map</span>;
    <span style="color: #93E0E3;">map_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">map_t</span> *<span style="color: #DFAF8F;">map</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> ~<span style="color: #93E0E3;">map_o</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org30e8a22" class="outline-4">
<h4 id="org30e8a22">map_o::map_o</h4>
<div class="outline-text-4" id="text-org30e8a22">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">map_o</span>::<span style="color: #93E0E3;">map_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">map_t</span> *<span style="color: #DFAF8F;">map</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"map-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;map = map;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc117046" class="outline-4">
<h4 id="orgc117046">map_o::~map_o</h4>
<div class="outline-text-4" id="text-orgc117046">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">map_o</span>::~<span style="color: #93E0E3;">map_o</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;map-&gt;clear ();
    <span style="color: #F0DFAF; font-weight: bold;">delete</span> <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;map;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga1f5351" class="outline-4">
<h4 id="orga1f5351">map_o::mark</h4>
<div class="outline-text-4" id="text-orga1f5351">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">map_o</span>::<span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell-&gt;state = CELL_STATE_USED;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;map)) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        obj-&gt;mark (env);
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5f8aa6" class="outline-3">
<h3 id="org5f8aa6">data</h3>
<div class="outline-text-3" id="text-org5f8aa6">
</div><div id="outline-container-org61e0314" class="outline-4">
<h4 id="org61e0314">field_map_t</h4>
<div class="outline-text-4" id="text-org61e0314">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">field_map_t</span> = <span style="color: #7CB8BB;">map</span>&lt;<span style="color: #7CB8BB;">name_t</span>, <span style="color: #7CB8BB;">obj_t</span> *&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7792a1d" class="outline-4">
<h4 id="org7792a1d">data_o</h4>
<div class="outline-text-4" id="text-org7792a1d">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">data_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">field_map_t</span> *<span style="color: #DFAF8F;">field_map</span>;
    <span style="color: #93E0E3;">data_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">t</span>, <span style="color: #7CB8BB;">field_map_t</span> *<span style="color: #DFAF8F;">field_map</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> ~<span style="color: #93E0E3;">data_o</span> ();
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org2922311" class="outline-4">
<h4 id="org2922311">data_o::data_o</h4>
<div class="outline-text-4" id="text-org2922311">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">data_o</span>::<span style="color: #93E0E3;">data_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">t</span>, <span style="color: #7CB8BB;">field_map_t</span> *<span style="color: #DFAF8F;">field_map</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = t;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_map = field_map;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org393cd5a" class="outline-4">
<h4 id="org393cd5a">data_o::~data_o</h4>
<div class="outline-text-4" id="text-org393cd5a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">data_o</span>::~<span style="color: #93E0E3;">data_o</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_map-&gt;clear ();
    <span style="color: #F0DFAF; font-weight: bold;">delete</span> <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_map;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5bf89de" class="outline-4">
<h4 id="org5bf89de">data_o::mark</h4>
<div class="outline-text-4" id="text-org5bf89de">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">data_o</span>::<span style="color: #93E0E3;">mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell-&gt;state = CELL_STATE_USED;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_map)) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        obj-&gt;mark (env);
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd183c60" class="outline-3">
<h3 id="orgd183c60">type</h3>
<div class="outline-text-3" id="text-orgd183c60">
</div><div id="outline-container-orgda28641" class="outline-4">
<h4 id="orgda28641"><span class="todo _note_">[note]</span> type-constructor</h4>
<div class="outline-text-4" id="text-orgda28641">
<ul class="org-ul">
<li><p>do not allow type-constructor to be applied for now.</p></li></ul>
</div>
</div>

<div id="outline-container-org31d0c12" class="outline-4">
<h4 id="org31d0c12">field_vector_t</h4>
<div class="outline-text-4" id="text-org31d0c12">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">using</span> <span style="color: #7CB8BB;">field_vector_t</span> = <span style="color: #7CB8BB;">vector</span>&lt;<span style="color: #7CB8BB;">name_t</span>&gt;;
</pre>
</div>
</div>
</div>

<div id="outline-container-org14760bc" class="outline-4">
<h4 id="org14760bc">type_o</h4>
<div class="outline-text-4" id="text-org14760bc">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">type_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">type_tag</span>;
    <span style="color: #7CB8BB;">field_vector_t</span> *<span style="color: #DFAF8F;">field_vector</span>;
    <span style="color: #93E0E3;">type_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>,
                <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">type_tag</span>,
                <span style="color: #7CB8BB;">field_vector_t</span> *<span style="color: #DFAF8F;">field_vector</span>);
    <span style="color: #F0DFAF; font-weight: bold;">virtual</span> ~<span style="color: #93E0E3;">type_o</span> ();
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd22b5be" class="outline-4">
<h4 id="orgd22b5be">type_o::type_o</h4>
<div class="outline-text-4" id="text-orgd22b5be">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">type_o</span>::
<span style="color: #93E0E3;">type_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>,
            <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">type_tag</span>,
            <span style="color: #7CB8BB;">field_vector_t</span> *<span style="color: #DFAF8F;">field_vector</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"type-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type_tag = type_tag;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_vector = field_vector;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org84e573b" class="outline-4">
<h4 id="org84e573b">type_o::~type_o</h4>
<div class="outline-text-4" id="text-org84e573b">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">type_o</span>::~<span style="color: #93E0E3;">type_o</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">delete</span> <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;field_vector;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2367e08" class="outline-3">
<h3 id="org2367e08">data_constructor</h3>
<div class="outline-text-3" id="text-org2367e08">
</div><div id="outline-container-orgb11ad4f" class="outline-4">
<h4 id="orgb11ad4f">data_constructor_o</h4>
<div class="outline-text-4" id="text-orgb11ad4f">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">data_constructor_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>;
    <span style="color: #93E0E3;">data_constructor_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c437ef" class="outline-4">
<h4 id="org7c437ef">data_constructor_o::data_constructor_o</h4>
<div class="outline-text-4" id="text-org7c437ef">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">data_constructor_o</span>::
<span style="color: #93E0E3;">data_constructor_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"data-constructor-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type = type;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge1d365f" class="outline-4">
<h4 id="orge1d365f">data_constructor_o::apply</h4>
<div class="outline-text-4" id="text-orge1d365f">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">data_constructor_o</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #7CB8BB;">field_map_t</span> *<span style="color: #DFAF8F;">field_map</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">field_map_t</span>;
    <span style="color: #7CB8BB;">field_vector_t</span> *<span style="color: #DFAF8F;">field_vector</span> = <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type-&gt;field_vector;
    <span style="color: #BFEBBF;">field_vector_t</span>::<span style="color: #7CB8BB;">reverse_iterator</span> <span style="color: #DFAF8F;">it</span>;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (it = field_vector-&gt;rbegin();
         it != field_vector-&gt;rend();
         it++) {
        <span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span> = *it;
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
        env-&gt;obj_stack-&gt;pop ();
        field_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (name, obj));
    }
    <span style="color: #7CB8BB;">data_o</span>* <span style="color: #DFAF8F;">data</span> =
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">data_o</span> (env,
                        <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type-&gt;type_tag,
                        field_map);
    env-&gt;obj_stack-&gt;push (data);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3c6061" class="outline-3">
<h3 id="org3c6061">data_creator</h3>
<div class="outline-text-3" id="text-org3c6061">
</div><div id="outline-container-orga52d704" class="outline-4">
<h4 id="orga52d704">data_creator_o</h4>
<div class="outline-text-4" id="text-orga52d704">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">data_creator_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>;
    <span style="color: #93E0E3;">data_creator_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org4b01af2" class="outline-4">
<h4 id="org4b01af2">data_creator_o::data_creator_o</h4>
<div class="outline-text-4" id="text-org4b01af2">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">data_creator_o</span>::
<span style="color: #93E0E3;">data_creator_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"data-creator-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type = type;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orga215c8a" class="outline-4">
<h4 id="orga215c8a">data_creator_o::apply</h4>
<div class="outline-text-4" id="text-orga215c8a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">data_creator_o</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
    env-&gt;obj_stack-&gt;pop ();
    <span style="color: #7CB8BB;">map_o</span> *<span style="color: #DFAF8F;">map</span> = <span style="color: #F0DFAF; font-weight: bold;">static_cast</span>&lt;<span style="color: #7CB8BB;">map_o</span> *&gt; (obj);
    <span style="color: #7CB8BB;">data_o</span>* <span style="color: #DFAF8F;">data</span> =
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">data_o</span> (env,
                        <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type-&gt;type_tag,
                        map-&gt;map);
    env-&gt;obj_stack-&gt;push (data);
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgffab07f" class="outline-3">
<h3 id="orgffab07f">data_predicate</h3>
<div class="outline-text-3" id="text-orgffab07f">
</div><div id="outline-container-org5266bd9" class="outline-4">
<h4 id="org5266bd9">data_predicate_o</h4>
<div class="outline-text-4" id="text-org5266bd9">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">data_predicate_o</span>: <span style="color: #7CB8BB;">obj_t</span>
{
    <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>;
    <span style="color: #93E0E3;">data_predicate_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca072a1" class="outline-4">
<h4 id="orgca072a1">data_predicate_o::data_predicate_o</h4>
<div class="outline-text-4" id="text-orgca072a1">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">data_predicate_o</span>::
<span style="color: #93E0E3;">data_predicate_o</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">type_o</span> *<span style="color: #DFAF8F;">type</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;t = <span style="color: #CC9393;">"data-predicate-t"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type = type;
    gc_for (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org675bb13" class="outline-4">
<h4 id="org675bb13">data_predicate_o::apply</h4>
<div class="outline-text-4" id="text-org675bb13">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">data_predicate_o</span>::<span style="color: #93E0E3;">apply</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #7CB8BB;">tag_t</span> <span style="color: #DFAF8F;">tag</span> = <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;type-&gt;type_tag;
    <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
    env-&gt;obj_stack-&gt;pop ();
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (obj-&gt;t == tag)
        env-&gt;obj_stack-&gt;push (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">bool_o</span> (env, <span style="color: #BFEBBF;">true</span>));
    <span style="color: #F0DFAF; font-weight: bold;">else</span>
        env-&gt;obj_stack-&gt;push (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">bool_o</span> (env, <span style="color: #BFEBBF;">false</span>));
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org61cd0b6" class="outline-3">
<h3 id="org61cd0b6">sexp</h3>
</div>
</div>

<div id="outline-container-org5748df" class="outline-2">
<h2 id="org5748df">env</h2>
<div class="outline-text-2" id="text-org5748df">
</div><div id="outline-container-org36fc415" class="outline-3">
<h3 id="org36fc415">jojo</h3>
<div class="outline-text-3" id="text-org36fc415">
</div><div id="outline-container-org5fbb538" class="outline-4">
<h4 id="org5fbb538">jojo_print</h4>
<div class="outline-text-4" id="text-org5fbb538">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">jojo_print</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>,
            <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">jo</span>: *jojo)
        cout &lt;&lt; jo-&gt;repr (env) &lt;&lt; <span style="color: #CC9393;">" "</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org58ea962" class="outline-4">
<h4 id="org58ea962">jojo_print_with_index</h4>
<div class="outline-text-4" id="text-org58ea962">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">jojo_print_with_index</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>,
                       <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>,
                       <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">index</span>)
{
    <span style="color: #BFEBBF;">jojo_t</span>::<span style="color: #7CB8BB;">iterator</span> <span style="color: #DFAF8F;">it</span>;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (it = jojo-&gt;begin ();
         it != jojo-&gt;end ();
         it++) {
        <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">it_index</span> = it - jojo-&gt;begin ();
        <span style="color: #7CB8BB;">jo_t</span> *<span style="color: #DFAF8F;">jo</span> = *it;
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (index == it_index) {
            cout &lt;&lt; <span style="color: #CC9393;">"-&gt;&gt; "</span> &lt;&lt; jo-&gt;repr (env) &lt;&lt; <span style="color: #CC9393;">" "</span>;
        }
        <span style="color: #F0DFAF; font-weight: bold;">else</span> {
            cout &lt;&lt; jo-&gt;repr (env) &lt;&lt; <span style="color: #CC9393;">" "</span>;
        }
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3ed6fc1" class="outline-3">
<h3 id="org3ed6fc1">frame</h3>
<div class="outline-text-3" id="text-org3ed6fc1">
</div><div id="outline-container-org1c7be4d" class="outline-4">
<h4 id="org1c7be4d">frame_t::frame_t</h4>
<div class="outline-text-4" id="text-org1c7be4d">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">frame_t</span>::<span style="color: #93E0E3;">frame_t</span> (<span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;index = 0;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo = jojo;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;local_map = local_map;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf73d791" class="outline-4">
<h4 id="orgf73d791">frame_report</h4>
<div class="outline-text-4" id="text-orgf73d791">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">frame_report</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span>)
{
    cout &lt;&lt; <span style="color: #CC9393;">"  - ["</span>
         &lt;&lt; frame-&gt;index+1
         &lt;&lt; <span style="color: #CC9393;">"/"</span>
         &lt;&lt; frame-&gt;jojo-&gt;size ()
         &lt;&lt; <span style="color: #CC9393;">"] "</span>;
    jojo_print_with_index (env, frame-&gt;jojo, frame-&gt;index);
    cout &lt;&lt; <span style="color: #CC9393;">"\n"</span>;

    cout &lt;&lt; <span style="color: #CC9393;">"  - local_map # "</span> &lt;&lt; frame-&gt;local_map-&gt;size () &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(frame-&gt;local_map)) {
        cout &lt;&lt; <span style="color: #CC9393;">"    "</span> &lt;&lt; kv.first &lt;&lt; <span style="color: #CC9393;">" : "</span>;
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        obj-&gt;print (env);
        cout &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org8045b99" class="outline-3">
<h3 id="org8045b99">name_map</h3>
<div class="outline-text-3" id="text-org8045b99">
</div><div id="outline-container-org1e15820" class="outline-4">
<h4 id="org1e15820">name_map_report</h4>
<div class="outline-text-4" id="text-org1e15820">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">name_map_report</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    cout &lt;&lt; <span style="color: #CC9393;">"- name_map # "</span> &lt;&lt; env-&gt;name_map-&gt;size () &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(env-&gt;name_map)) {
        cout &lt;&lt; <span style="color: #CC9393;">"  "</span> &lt;&lt; kv.first &lt;&lt; <span style="color: #CC9393;">" : "</span>;
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        obj-&gt;print (env);
        cout &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdd96e2a" class="outline-3">
<h3 id="orgdd96e2a">obj_stack</h3>
<div class="outline-text-3" id="text-orgdd96e2a">
</div><div id="outline-container-org4697715" class="outline-4">
<h4 id="org4697715">frame_stack_report</h4>
<div class="outline-text-4" id="text-org4697715">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">frame_stack_report</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    cout &lt;&lt; <span style="color: #CC9393;">"- frame_stack # "</span> &lt;&lt; env-&gt;frame_stack-&gt;size () &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    <span style="color: #7CB8BB;">frame_stack_t</span> <span style="color: #DFAF8F;">frame_stack</span> = *(env-&gt;frame_stack);
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (<span style="color: #F0DFAF; font-weight: bold;">!</span>frame_stack.empty ()) {
       <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span> = frame_stack.top ();
       frame_report (env, frame);
       frame_stack.pop ();
    }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org37419bc" class="outline-3">
<h3 id="org37419bc">frame_stack</h3>
<div class="outline-text-3" id="text-org37419bc">
</div><div id="outline-container-org8e6b376" class="outline-4">
<h4 id="org8e6b376">obj_stack_report</h4>
<div class="outline-text-4" id="text-org8e6b376">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">obj_stack_report</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    cout &lt;&lt; <span style="color: #CC9393;">"- obj_stack # "</span> &lt;&lt; env-&gt;obj_stack-&gt;size () &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    cout &lt;&lt; <span style="color: #CC9393;">"  "</span>;
    <span style="color: #7CB8BB;">obj_stack_t</span> <span style="color: #DFAF8F;">obj_stack</span> = *(env-&gt;obj_stack);
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (<span style="color: #F0DFAF; font-weight: bold;">!</span>obj_stack.empty ()) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = obj_stack.top ();
        obj-&gt;print (env);
        cout &lt;&lt; <span style="color: #CC9393;">" "</span>;
        obj_stack.pop ();
    }
    cout &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd9f3773" class="outline-3">
<h3 id="orgd9f3773">gc</h3>
<div class="outline-text-3" id="text-orgd9f3773">
</div><div id="outline-container-org482d777" class="outline-4">
<h4 id="org482d777">gc_t::gc_t</h4>
<div class="outline-text-4" id="text-org482d777">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">gc_t</span>::<span style="color: #93E0E3;">gc_t</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;index = 0;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell_area = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">cell_area_t</span>;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">it</span>: *(<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;cell_area))
        it.state = CELL_STATE_FREE;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org41a8299" class="outline-4">
<h4 id="org41a8299">gc_prepare</h4>
<div class="outline-text-4" id="text-org41a8299">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_prepare</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #7CB8BB;">gc_t</span> *<span style="color: #DFAF8F;">gc</span> = env-&gt;gc;
    gc-&gt;index = 0;
    gc-&gt;mark_counter = 0;
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">it</span>: *(gc-&gt;cell_area))
        it.state = CELL_STATE_FREE;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c69b7b" class="outline-4">
<h4 id="org6c69b7b">gc_mark_one</h4>
<div class="outline-text-4" id="text-org6c69b7b">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_mark_one</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (obj-&gt;cell-&gt;state == CELL_STATE_FREE) {
        env-&gt;gc-&gt;mark_counter++;
        obj-&gt;mark (env);
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org863d92a" class="outline-4">
<h4 id="org863d92a">gc_mark</h4>
<div class="outline-text-4" id="text-org863d92a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_mark</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">kv</span>: *(env-&gt;name_map)) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = kv.second;
        gc_mark_one (env, obj);
    }
    <span style="color: #7CB8BB;">obj_stack_t</span> <span style="color: #DFAF8F;">obj_stack</span> = *(env-&gt;obj_stack);
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (<span style="color: #F0DFAF; font-weight: bold;">!</span>obj_stack.empty ()) {
        <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = obj_stack.top ();
        gc_mark_one (env, obj);
        obj_stack.pop ();
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfef3519" class="outline-4">
<h4 id="orgfef3519">gc_sweep</h4>
<div class="outline-text-4" id="text-orgfef3519">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_sweep</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">for</span> (<span style="color: #F0DFAF; font-weight: bold;">auto</span> &amp;<span style="color: #DFAF8F;">cell</span>: *(env-&gt;gc-&gt;cell_area))
        <span style="color: #F0DFAF; font-weight: bold;">if</span> (cell.state == CELL_STATE_FREE)
            <span style="color: #F0DFAF; font-weight: bold;">delete</span> cell.obj;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c1c450" class="outline-4">
<h4 id="org7c1c450">gc_run</h4>
<div class="outline-text-4" id="text-org7c1c450">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_run</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    gc_prepare (env);
    gc_mark (env);
    gc_sweep (env);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org889a401" class="outline-4">
<h4 id="org889a401">gc_next_free_cell</h4>
<div class="outline-text-4" id="text-org889a401">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">cell_t</span> *
<span style="color: #93E0E3;">gc_next_free_cell</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
     <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">index</span> = env-&gt;gc-&gt;index;
     <span style="color: #F0DFAF; font-weight: bold;">if</span> (index &gt;= cell_area_size) {
         gc_run (env);
         <span style="color: #F0DFAF; font-weight: bold;">if</span> (env-&gt;gc-&gt;mark_counter == cell_area_size) {
             cout &lt;&lt; <span style="color: #CC9393;">"fatal error : cell_area fulled after gc"</span> &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
             exit (1);
         }
         <span style="color: #F0DFAF; font-weight: bold;">else</span> {
             <span style="color: #F0DFAF; font-weight: bold;">return</span> gc_next_free_cell (env);
         }
     }

     <span style="color: #7CB8BB;">cell_t</span> &amp;<span style="color: #DFAF8F;">cell</span> = (*(env-&gt;gc-&gt;cell_area)) [index];
     <span style="color: #F0DFAF; font-weight: bold;">if</span> (cell.state == CELL_STATE_FREE) {
         env-&gt;gc-&gt;index++;
         <span style="color: #F0DFAF; font-weight: bold;">return</span> &amp;cell;
     }
     <span style="color: #F0DFAF; font-weight: bold;">else</span> {
         env-&gt;gc-&gt;index++;
         <span style="color: #F0DFAF; font-weight: bold;">return</span> gc_next_free_cell (env);
     }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org928db5a" class="outline-4">
<h4 id="org928db5a">gc_for</h4>
<div class="outline-text-4" id="text-org928db5a">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">gc_for</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span>)
{
    <span style="color: #7CB8BB;">cell_t</span> *<span style="color: #DFAF8F;">cell</span> = gc_next_free_cell (env);
    cell-&gt;obj = obj;
    obj-&gt;cell = cell;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org86f3a7c" class="outline-3">
<h3 id="org86f3a7c">env_t::env_t</h3>
<div class="outline-text-3" id="text-org86f3a7c">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">env_t</span>::<span style="color: #93E0E3;">env_t</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name_map = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">name_map_t</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;obj_stack = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">obj_stack_t</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;frame_stack = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">frame_stack_t</span>;
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;gc = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">gc_t</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb01a926" class="outline-3">
<h3 id="orgb01a926">env_t::step</h3>
<div class="outline-text-3" id="text-orgb01a926">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">env_t</span>::<span style="color: #93E0E3;">step</span> ()
{
    <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span> = <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;frame_stack-&gt;top ();
    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">size</span> = frame-&gt;jojo-&gt;size ();
    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">index</span> = frame-&gt;index;

    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">handle empty jojo</span>
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (index &gt;= size) {
        <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;frame_stack-&gt;pop ();
        <span style="color: #F0DFAF; font-weight: bold;">return</span>;
    }

    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">get jo only for non empty jojo</span>
    <span style="color: #7CB8BB;">jojo_t</span> <span style="color: #DFAF8F;">jojo</span> = *(frame-&gt;jojo);
    <span style="color: #7CB8BB;">jo_t</span> *<span style="color: #DFAF8F;">jo</span> = jojo [index];

    frame-&gt;index++;

    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">handle proper tail call</span>
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (index+1 == size)
        <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;frame_stack-&gt;pop ();

    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">since the last frame might be drop,</span>
    <span style="color: #5F7F5F;">//   </span><span style="color: #7F9F7F;">we pass local_map the last frame</span>
    <span style="color: #5F7F5F;">//   </span><span style="color: #7F9F7F;">as an extra argument.</span>
    jo-&gt;exe (<span style="color: #F0DFAF; font-weight: bold;">this</span>, frame-&gt;local_map);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org53c368f" class="outline-3">
<h3 id="org53c368f">env_t::run</h3>
<div class="outline-text-3" id="text-org53c368f">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">env_t</span>::<span style="color: #93E0E3;">run</span> ()
{
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (<span style="color: #F0DFAF; font-weight: bold;">!</span><span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;frame_stack-&gt;empty ())
        <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;step ();
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8394133" class="outline-3">
<h3 id="org8394133">env_t::report</h3>
<div class="outline-text-3" id="text-org8394133">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">env_t</span>::<span style="color: #93E0E3;">report</span> ()
{
    name_map_report (<span style="color: #F0DFAF; font-weight: bold;">this</span>);
    frame_stack_report (<span style="color: #F0DFAF; font-weight: bold;">this</span>);
    obj_stack_report (<span style="color: #F0DFAF; font-weight: bold;">this</span>);
    cout &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb39cf46" class="outline-2">
<h2 id="orgb39cf46">jo</h2>
<div class="outline-text-2" id="text-orgb39cf46">
</div><div id="outline-container-org749ad19" class="outline-3">
<h3 id="org749ad19">jo</h3>
<div class="outline-text-3" id="text-org749ad19">
</div><div id="outline-container-org55e9022" class="outline-4">
<h4 id="org55e9022">jo_t::exe</h4>
<div class="outline-text-4" id="text-org55e9022">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    cout &lt;&lt; <span style="color: #CC9393;">"fatal error : unknown jo"</span> &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    exit (1);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org39a99cd" class="outline-4">
<h4 id="org39a99cd">jo_t::repr</h4>
<div class="outline-text-4" id="text-org39a99cd">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(unknown)"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbeca43f" class="outline-3">
<h3 id="orgbeca43f">call_jo</h3>
<div class="outline-text-3" id="text-orgbeca43f">
</div><div id="outline-container-orgc779689" class="outline-4">
<h4 id="orgc779689">call_jo_t</h4>
<div class="outline-text-4" id="text-orgc779689">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">call_jo_t</span>: <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>;

    <span style="color: #93E0E3;">call_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>);

    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcbdd2f7" class="outline-4">
<h4 id="orgcbdd2f7">call_jo_t::call_jo_t</h4>
<div class="outline-text-4" id="text-orgcbdd2f7">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">call_jo_t</span>::<span style="color: #93E0E3;">call_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name = name;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0b1611" class="outline-4">
<h4 id="orgf0b1611">call_jo_t::exe</h4>
<div class="outline-text-4" id="text-orgf0b1611">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">call_jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">local_map first</span>
    <span style="color: #F0DFAF; font-weight: bold;">auto</span> <span style="color: #DFAF8F;">it</span> = local_map-&gt;find (<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name);
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (it != local_map-&gt;end ()) {
        it-&gt;second-&gt;apply (env);
        <span style="color: #F0DFAF; font-weight: bold;">return</span>;
    }
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">name_map second</span>
    it = env-&gt;name_map-&gt;find (<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name);
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (it != env-&gt;name_map-&gt;end ()) {
        it-&gt;second-&gt;apply (env);
        <span style="color: #F0DFAF; font-weight: bold;">return</span>;
    }
    cout &lt;&lt; <span style="color: #CC9393;">"fatal error ! unknown name : "</span>
         &lt;&lt; <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name
         &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    exit (1);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org79ed28e" class="outline-4">
<h4 id="org79ed28e">call_jo_t::repr</h4>
<div class="outline-text-4" id="text-org79ed28e">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">call_jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(call "</span> + <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name + <span style="color: #CC9393;">")"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgba50f48" class="outline-3">
<h3 id="orgba50f48">let_jo</h3>
<div class="outline-text-3" id="text-orgba50f48">
</div><div id="outline-container-orgcc8239d" class="outline-4">
<h4 id="orgcc8239d">let_jo_t</h4>
<div class="outline-text-4" id="text-orgcc8239d">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">let_jo_t</span>: <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>;
    <span style="color: #93E0E3;">let_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org6bdd819" class="outline-4">
<h4 id="org6bdd819">let_jo_t::let_jo_t</h4>
<div class="outline-text-4" id="text-org6bdd819">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">let_jo_t</span>::<span style="color: #93E0E3;">let_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name = name;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb8bb289" class="outline-4">
<h4 id="orgb8bb289">let_jo_t::exe</h4>
<div class="outline-text-4" id="text-orgb8bb289">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">let_jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
     <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
     env-&gt;obj_stack-&gt;pop ();
     local_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name, obj));
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3812a2e" class="outline-4">
<h4 id="org3812a2e">let_jo_t::repr</h4>
<div class="outline-text-4" id="text-org3812a2e">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">let_jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(let "</span> + <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name + <span style="color: #CC9393;">")"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org73b1641" class="outline-3">
<h3 id="org73b1641">lambda_jo</h3>
<div class="outline-text-3" id="text-org73b1641">
</div><div id="outline-container-org3eef1d0" class="outline-4">
<h4 id="org3eef1d0">lambda_jo_t</h4>
<div class="outline-text-4" id="text-org3eef1d0">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">lambda_jo_t</span>: <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>;
    <span style="color: #93E0E3;">lambda_jo_t</span> (<span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org561e119" class="outline-4">
<h4 id="org561e119">lambda_jo_t::lambda_jo_t</h4>
<div class="outline-text-4" id="text-org561e119">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">lambda_jo_t</span>::<span style="color: #93E0E3;">lambda_jo_t</span> (<span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo = jojo;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ca7e59" class="outline-4">
<h4 id="org5ca7e59">lambda_jo_t::exe</h4>
<div class="outline-text-4" id="text-org5ca7e59">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">lambda_jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">create lambda_o by closure</span>
    <span style="color: #5F7F5F;">// </span><span style="color: #7F9F7F;">and push it to obj_stack</span>
    <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span> = env-&gt;frame_stack-&gt;top ();
    <span style="color: #7CB8BB;">lambda_o</span> *<span style="color: #DFAF8F;">lambda</span> =
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">lambda_o</span> (env, <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;jojo, frame-&gt;local_map);
    env-&gt;obj_stack-&gt;push (lambda);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a32d49" class="outline-4">
<h4 id="org7a32d49">lambda_jo_t::repr</h4>
<div class="outline-text-4" id="text-org7a32d49">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">lambda_jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(lambda)"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org601c1e2" class="outline-3">
<h3 id="org601c1e2">field_jo</h3>
<div class="outline-text-3" id="text-org601c1e2">
</div><div id="outline-container-org6516ddf" class="outline-4">
<h4 id="org6516ddf">field_jo_t</h4>
<div class="outline-text-4" id="text-org6516ddf">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">field_jo_t</span>: <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>;
    <span style="color: #93E0E3;">field_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>);
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffca87e" class="outline-4">
<h4 id="orgffca87e">field_jo_t::field_jo_t</h4>
<div class="outline-text-4" id="text-orgffca87e">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #BFEBBF;">field_jo_t</span>::<span style="color: #93E0E3;">field_jo_t</span> (<span style="color: #7CB8BB;">name_t</span> <span style="color: #DFAF8F;">name</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name = name;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3bf7654" class="outline-4">
<h4 id="org3bf7654">field_jo_t::exe</h4>
<div class="outline-text-4" id="text-org3bf7654">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">field_jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
    env-&gt;obj_stack-&gt;pop ();
    <span style="color: #7CB8BB;">data_o</span> *<span style="color: #DFAF8F;">data</span> = <span style="color: #F0DFAF; font-weight: bold;">static_cast</span>&lt;<span style="color: #7CB8BB;">data_o</span> *&gt; (obj);
    <span style="color: #F0DFAF; font-weight: bold;">auto</span> <span style="color: #DFAF8F;">it</span> = data-&gt;field_map-&gt;find (<span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name);
    <span style="color: #F0DFAF; font-weight: bold;">if</span> (it != data-&gt;field_map-&gt;end ()) {
        it-&gt;second-&gt;apply (env);
        <span style="color: #F0DFAF; font-weight: bold;">return</span>;
    }
    cout &lt;&lt; <span style="color: #CC9393;">"fatal error ! unknown field : "</span>
         &lt;&lt; <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name
         &lt;&lt; <span style="color: #CC9393;">"\n"</span>;
    exit (1);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org8ed9407" class="outline-4">
<h4 id="org8ed9407">field_jo_t::repr</h4>
<div class="outline-text-4" id="text-org8ed9407">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">field_jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(field "</span> + <span style="color: #F0DFAF; font-weight: bold;">this</span>-&gt;name + <span style="color: #CC9393;">")"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org31f62d4" class="outline-3">
<h3 id="org31f62d4">apply_jo</h3>
<div class="outline-text-3" id="text-org31f62d4">
</div><div id="outline-container-orga2ce963" class="outline-4">
<h4 id="orga2ce963">apply_jo_t</h4>
<div class="outline-text-4" id="text-orga2ce963">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #F0DFAF; font-weight: bold;">struct</span> <span style="color: #7CB8BB;">apply_jo_t</span>: <span style="color: #7CB8BB;">jo_t</span>
{
    <span style="color: #7CB8BB;">void</span> <span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>);
    <span style="color: #7CB8BB;">string</span> <span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>);
};
</pre>
</div>
</div>
</div>

<div id="outline-container-org7573f72" class="outline-4">
<h4 id="org7573f72">apply_jo_t::exe</h4>
<div class="outline-text-4" id="text-org7573f72">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #BFEBBF;">apply_jo_t</span>::<span style="color: #93E0E3;">exe</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>, <span style="color: #7CB8BB;">local_map_t</span> *<span style="color: #DFAF8F;">local_map</span>)
{
    <span style="color: #7CB8BB;">obj_t</span> *<span style="color: #DFAF8F;">obj</span> = env-&gt;obj_stack-&gt;top ();
    env-&gt;obj_stack-&gt;pop ();
    obj-&gt;apply (env);
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org90e1048" class="outline-4">
<h4 id="org90e1048">apply_jo_t::repr</h4>
<div class="outline-text-4" id="text-org90e1048">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">string</span>
<span style="color: #BFEBBF;">apply_jo_t</span>::<span style="color: #93E0E3;">repr</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
    <span style="color: #F0DFAF; font-weight: bold;">return</span> <span style="color: #CC9393;">"(apply)"</span>;
}
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgbb6855f" class="outline-2">
<h2 id="orgbb6855f">epilog</h2>
<div class="outline-text-2" id="text-orgbb6855f">
</div><div id="outline-container-org33c573e" class="outline-3">
<h3 id="org33c573e"><span class="todo _gt__lt_">&gt;&lt;</span> test</h3>
</div>

<div id="outline-container-org40b0395" class="outline-3">
<h3 id="org40b0395">play</h3>
<div class="outline-text-3" id="text-org40b0395">
</div><div id="outline-container-org1d7d62d" class="outline-4">
<h4 id="org1d7d62d">p1</h4>
<div class="outline-text-4" id="text-org1d7d62d">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">p1</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
     cout &lt;&lt; <span style="color: #CC9393;">"- p1\n"</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a637e9" class="outline-4">
<h4 id="org3a637e9">p2</h4>
<div class="outline-text-4" id="text-org3a637e9">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">void</span>
<span style="color: #93E0E3;">p2</span> (<span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span>)
{
     cout &lt;&lt; <span style="color: #CC9393;">"- p2\n"</span>;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5a5f3b8" class="outline-3">
<h3 id="org5a5f3b8">main</h3>
<div class="outline-text-3" id="text-org5a5f3b8">
<div class="org-src-container">

<pre class="src src-cpp"><span style="color: #7CB8BB;">int</span>
<span style="color: #93E0E3;">main</span> ()
{
    <span style="color: #7CB8BB;">env_t</span> *<span style="color: #DFAF8F;">env</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">env_t</span>;
    <span style="color: #7CB8BB;">field_map_t</span> *<span style="color: #DFAF8F;">field_map</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">field_map_t</span>;
    field_map-&gt;insert
        (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"f1"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"fs1"</span>)));
    field_map-&gt;insert
        (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"f2"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"fs2"</span>)));

    <span style="color: #7CB8BB;">name_map_t</span> *<span style="color: #DFAF8F;">name_map</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">name_map_t</span>;
    name_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"k1"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"s1"</span>)));
    name_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"k2"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"s2"</span>)));
    name_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"p1"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">primitive_o</span> (env, p1)));
    name_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"p2"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">primitive_o</span> (env, p2)));
    name_map-&gt;insert (pair&lt;name_t, <span style="color: #7CB8BB;">obj_t</span> *&gt; (<span style="color: #CC9393;">"d1"</span>, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">data_o</span> (env, <span style="color: #CC9393;">"d-t"</span>, field_map)));
    env-&gt;name_map = name_map;

    <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">lambda_jojo</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">jojo_t</span>;
    lambda_jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"k1"</span>));
    lambda_jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"k2"</span>));
    lambda_jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"v"</span>));
    <span style="color: #7CB8BB;">jojo_t</span> *<span style="color: #DFAF8F;">jojo</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">jojo_t</span>;
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"p1"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"p2"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"k1"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"k2"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">let_jo_t</span> (<span style="color: #CC9393;">"v"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"v"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">lambda_jo_t</span> (lambda_jojo));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">apply_jo_t</span> ());
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"v"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"d1"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">call_jo_t</span> (<span style="color: #CC9393;">"d1"</span>));
    jojo-&gt;push_back (<span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">field_jo_t</span> (<span style="color: #CC9393;">"f1"</span>));

    <span style="color: #7CB8BB;">frame_t</span> *<span style="color: #DFAF8F;">frame</span> = <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">frame_t</span> (jojo, <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">local_map_t</span>);
    env-&gt;frame_stack-&gt;push (frame);
    env-&gt;report ();
    env-&gt;run ();

    <span style="color: #7CB8BB;">size_t</span> <span style="color: #DFAF8F;">counter</span>;

    counter = 0;
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (counter &lt; cell_area_size) {
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"s"</span>);
        counter++;
    }

    counter = 0;
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (counter &lt; cell_area_size) {
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"s"</span>);
        counter++;
    }

    counter = 0;
    <span style="color: #F0DFAF; font-weight: bold;">while</span> (counter &lt; cell_area_size) {
        <span style="color: #F0DFAF; font-weight: bold;">new</span> <span style="color: #7CB8BB;">string_o</span> (env, <span style="color: #CC9393;">"s"</span>);
        counter++;
    }

    env-&gt;report ();
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2018-07-07 Sat 20:54</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
